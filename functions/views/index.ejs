<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">

<head>
  <!-- views/partials/head.ejs -->
  <meta charset="UTF-8">
  <title>Results - Thank You!</title>

  <!-- CSS (load bootstrap from a CDN) -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <style>
    body {
      padding-top: 50px;
    }

    .resp-sharing-button__link,
    .resp-sharing-button__icon {
      display: inline-block
    }

    .resp-sharing-button__link {
      text-decoration: none;
      color: #fff;
      margin: 0.5em
    }

    .resp-sharing-button {
      border-radius: 5px;
      transition: 25ms ease-out;
      padding: 0.5em 0.75em;
      font-family: Helvetica Neue, Helvetica, Arial, sans-serif
    }

    .resp-sharing-button__icon svg {
      width: 1em;
      height: 1em;
      margin-right: 0.4em;
      vertical-align: top
    }

    .resp-sharing-button--small svg {
      margin: 0;
      vertical-align: middle
    }

    /* Non solid icons get a stroke */
    .resp-sharing-button__icon {
      stroke: #fff;
      fill: none
    }

    /* Solid icons get a fill */
    .resp-sharing-button__icon--solid,
    .resp-sharing-button__icon--solidcircle {
      fill: #fff;
      stroke: none
    }

    ul {
      padding-left: 30px;
    }

    hr {
      border-color: #cbf2d6;
      background-color: #cbf2d6;
      color: #cbf2d6;
    }

    em {
      font-style: normal;
      font-size: 120%;
      text-transform: uppercase;
    }

    table,
    th,
    td {
      color: black;
    }

    .desc {
      color: #cbf2d6
    }

    .table {
      margin: auto;
      width: 50% !important;
    }

    .jumbotron {
      background-color: #000000
    }

    .navbar-header {
      background-color: #000000
    }

    .resp-sharing-button--twitter {
      background-color: #55acee
    }

    .resp-sharing-button--whatsapp {
      background-color: #35bea5
    }

    .resp-sharing-button--whatsapp:hover {
      background-color: #35bea5
    }

    .resp-sharing-button--twitter:hover {
      background-color: #2795e9
    }

    .resp-sharing-button--facebook {
      background-color: #3b5998
    }

    .resp-sharing-button--facebook:hover {
      background-color: #2d4373
    }

    .resp-sharing-button--facebook {
      background-color: #3b5998;
      border-color: #3b5998;
    }

    .resp-sharing-button--facebook:hover,
    .resp-sharing-button--facebook:active {
      background-color: #2d4373;
      border-color: #2d4373;
    }

    .resp-sharing-button--twitter {
      background-color: #55acee;
      border-color: #55acee;
    }

    .resp-sharing-button--twitter:hover,
    .resp-sharing-button--twitter:active {
      background-color: #2795e9;
      border-color: #2795e9;
    }

    .resp-sharing-button--linkedin {
      background-color: #0077b5;
      border-color: #0077b5;
    }

    .resp-sharing-button--linkedin:hover,
    .resp-sharing-button--linkedin:active {
      background-color: #046293;
      border-color: #046293;
    }

    #myInput {
      background-color: #000000;
      font-size: smaller;
      font-family: Helvetica Neue, Helvetica, Arial, sans-serif
    }

    #copyButton {
      background-color: #000000;
      border: 2px solid #FFFFFF;
      font-family: Helvetica Neue, Helvetica, Arial, sans-serif
    }
  </style>
</head>
<!-- <link href= "/styles.css" rel="stylesheet" type="text/css" /> -->

<body class="container">
  <link href='https://fonts.googleapis.com/css?family=Aldrich' rel='stylesheet'>
  <style>
    body {
      font-family: 'Aldrich';
      font-size: 22px;
      color: #30e35f;
      background-color: #c5cfc4
    }

    * {
      margin: 0;
      padding: 0;
    }
  </style>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="/__/firebase/7.2.1/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="/__/firebase/7.2.1/firebase-analytics.js"></script>

  <!-- Initialize Firebase -->
  <script src="/__/firebase/init.js"></script>

  <header>
  </header>

  <main>
    <div class="jumbotron jumbotron-fluid shadow-sm p-3 mb-5 bg-white rounded">
      <div class="container container-fluid">
        <h2>Congratulations! Your Programmer Persona is... </h2>
        <h3><%- persona %></h3>
        <br>
        <p><%- desc %></p>
        <!-- <p><%- JSON.stringify(data.affect) %></p> -->


        <!-- Sharingbutton Facebook -->
        <a class="resp-sharing-button__link"
          href="https://facebook.com/sharer/sharer.php?u=https%3A%2F%2Fgmu.az1.qualtrics.com%2Fjfe%2Fform%2FSV_cvDj3Vd3ZZvqAVT&quote=<%= shareTitle %> <%= shareDesc %> Discover your programming persona here!"
          target="_blank" rel="noopener" aria-label="Facebook">
          <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium">
            <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                  d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z" />
              </svg></div>Facebook
          </div>
        </a>

        <!-- Sharingbutton Twitter -->
        <%- twitter %>
        <!-- <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Discover%20your%20programming%20persona%20here%21%20&amp;url=https%3A%2F%2Fgmu.az1.qualtrics.com%2Fjfe%2Fform%2FSV_cvDj3Vd3ZZvqAVT" target="_blank" rel="noopener" aria-label="Twitter"> -->
        <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium">
          <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path
                d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z" />
            </svg></div>Twitter
        </div>
        </a>

        <!-- Share button with whatsapp -->
        <a class="resp-sharing-button__link" href="whatsapp://send?text=<%= shareTitle %> <%= shareDesc %> https://gmu.az1.qualtrics.com/jfe/form/SV_cvDj3Vd3ZZvqAVT"
          data-action="share/whatsapp/share">
          <div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--medium">
            <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
              <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 455.731 455.731"
                style="enable-background:new 0 0 455.731 455.731;" xml:space="preserve">
                <g>
                  <rect x="0" y="0" style="fill:#1BD741;" width="455.731" height="455.731" />
                  <g>
                    <path style="fill:#FFFFFF;" d="M68.494,387.41l22.323-79.284c-14.355-24.387-21.913-52.134-21.913-80.638
               c0-87.765,71.402-159.167,159.167-159.167s159.166,71.402,159.166,159.167c0,87.765-71.401,159.167-159.166,159.167
               c-27.347,0-54.125-7-77.814-20.292L68.494,387.41z M154.437,337.406l4.872,2.975c20.654,12.609,44.432,19.274,68.762,19.274
               c72.877,0,132.166-59.29,132.166-132.167S300.948,95.321,228.071,95.321S95.904,154.611,95.904,227.488
               c0,25.393,7.217,50.052,20.869,71.311l3.281,5.109l-12.855,45.658L154.437,337.406z" />
                    <path style="fill:#FFFFFF;" d="M183.359,153.407l-10.328-0.563c-3.244-0.177-6.426,0.907-8.878,3.037
               c-5.007,4.348-13.013,12.754-15.472,23.708c-3.667,16.333,2,36.333,16.667,56.333c14.667,20,42,52,90.333,65.667
               c15.575,4.404,27.827,1.435,37.28-4.612c7.487-4.789,12.648-12.476,14.508-21.166l1.649-7.702c0.524-2.448-0.719-4.932-2.993-5.98
               l-34.905-16.089c-2.266-1.044-4.953-0.384-6.477,1.591l-13.703,17.764c-1.035,1.342-2.807,1.874-4.407,1.312
               c-9.384-3.298-40.818-16.463-58.066-49.687c-0.748-1.441-0.562-3.19,0.499-4.419l13.096-15.15
               c1.338-1.547,1.676-3.722,0.872-5.602l-15.046-35.201C187.187,154.774,185.392,153.518,183.359,153.407z" />
                  </g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
              </svg>
              </svg></div>Whatsapp
          </div>
        </a>

        <!-- Sharingbutton LinkedIn -->
        <%- linkedin %>
        <!-- <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fgmu.az1.qualtrics.com%2Fjfe%2Fform%2FSV_cvDj3Vd3ZZvqAVT&amp;title=Discover%20your%20programming%20persona%20here%21%20&amp;summary=Discover%20your%20programming%20persona%20here%21%20&amp;source=https%3A%2F%2Fgmu.az1.qualtrics.com%2Fjfe%2Fform%2FSV_cvDj3Vd3ZZvqAVT" target="_blank" rel="noopener" aria-label="LinkedIn"> -->
        <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium">
          <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path
                d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z" />
            </svg></div>LinkedIn
        </div>
        </a>

        <!-- The text field -->
        <input type="text" value="https://gmu.az1.qualtrics.com/jfe/form/SV_cvDj3Vd3ZZvqAVT" id="myInput">

        <!-- The button used to copy the text -->
        <button id="copyButton" class="btn btn-secondary" data-toggle="tooltip" data-placement="top"
          title="Tooltip on top" onclick="copyText()">Copy URL</button>

        <br>

      </div>
    </div>

    <br>
    <div class="jumbotron jumbotron-fluid shadow-sm p-3 mb-5 bg-white rounded">
      <div class="container container-fluid">
        <div class="desc">
          <p>The programming questions you answered encompassed three categories of tasks:</p>
          <ul>
            <li><u>Debugging</u>
              <ul>
                <li>Diagnosing and fixing bugs, or errors, in the code.</li>
              </ul>
            </li>
            <li><u>Implementation</u>
              <ul>
                <li>Implementing code, setting up objects and calling methods to implement expected functionality.</li>
              </ul>
            </li>
            <li><u>Verification</u>
              <ul>
                <li>Testing and verifying that your code is working as expected.</li>
              </ul>
            </li>
          </ul>
          <p>Different types of programming tasks often call for different strategies. See how your programming persona
            differs for these tasks.</p>
          <br><br>
        </div>

        <hr class="align-self-end">
        <br><br>

        <h4>Your persona for <em>Debugging</em>-style tasks is </h4>
        <p><%- subPersonas.D_persona.name %></p>
        <h6>_________________________________</h6>
        <h4><%- subPersonas.D_persona.desc %></h4>
        <br><br>

        <h4>Your persona for <em>Implementation</em>-style tasks is </h4>
        <p><%- subPersonas.I_persona.name %></p>
        <h6>_________________________________</h6>
        <h4><%- subPersonas.I_persona.desc %></h4>
        <br><br>

        <h4>Your persona for <em>Verification</em>-style tasks is</h4>
        <p><%- subPersonas.V_persona.name %></p>
        <h6>_________________________________</h6>
        <h4><%- subPersonas.V_persona.desc %></h4>
        <br><br>
        <hr class="align-self-end">
      </div>
    </div>


    <!-- <div id="piechart"></div> -->

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script type="text/javascript">
      // Load google charts
      google.charts.load('current', { 'packages': ['corechart'] });
      google.charts.setOnLoadCallback(drawChart);

      // Draw the chart and set the chart values
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Persona', 'Respondants'],
          ['Calculated', <%= metrics.numCalculated %>],
          ['Experimental', <%= metrics.numExperimental %>],
          ['Resourceful', <%= metrics.numResourceful %>]
        ]);

        let width = 550;
        let height = 400;

        let options = {
          'width': width,
          'height': height,
          'fontSize': 20,
          'backgroundColor': '#c5cfc4',
          'legend': {
            textStyle: {
              fontSize: 12
            }
          },
          'tooltip': {
            textStyle: {
              fontSize: 12
            }
          },
          fontName: "Aldrich"
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
      }

      function copyText() {
        /* Get the text field */
        var copyText = document.getElementById("myInput");

        /* Select the text field */
        copyText.select();
        copyText.setSelectionRange(0, 99999); /*For mobile devices*/

        /* Copy the text inside the text field */
        document.execCommand("copy");

        /* Alert the copied text */
        var anchor = document.getElementById('copyButton');
        anchor.title = 'Copied!';
        // alert("Copied the text: " + copyText.value);
      }

    </script>


    <br>
    <h2 style="color:black">How Do I Compare?</h2>
    <h6 style="color:black">_________________________________</h6>
    <p style="color:#383838">How do other developers typically approach programming problems?</p>
    <br>
    <div class="row">
      <div class="col-sm-6">
        <div class="card">
          <div class="card-header" style="color:black">My typical strategy</div>
          <h6 style="color:black">_________________________________</h6>
          <div class="card-body">
            <h3 style="color:#383838"><%- persona %></h3>
            <br>
            <p style="color:#383838"><%- desc %></p>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="card">
          <div class="card-header" style="color:black">Strategies of other developers</div>
          <h6 style="color:black">_________________________________</h6>
          <div class="card-body">
            <div id="piechart" align="center"></div>
          </div>
        </div>
      </div>
    </div>
    <br>
    <h6 style="color:black">_________________________________</h6>
    <p style="color:#383838">How do other developers approach different programming tasks?</p>
    <!-- <div class="row" style="align:center"> -->
    <br>
    <div class="table-responsive">
      <table class="table w-auto">
        <thead>
          <tr>
            <th class="col-xs-3">&nbsp;</td>
            <th class="col-xs-3" style='width:25px'>Debugging<br></td>
            <th class="col-xs-3" style='width:25px'>Implementation<br></td>
            <th class="col-xs-3" style='width:25px'>Verification<br></td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><br>My typical strategy</td>
            <td>
              <p><%- subPersonas.D_persona.name %></p>
              <h6>_________________________________</h6>
              <h4><%- subPersonas.D_persona.desc %></h4>
            </td>
            <td>
              <p><%- subPersonas.I_persona.name %></p>
              <h6>_________________________________</h6>
              <h4><%- subPersonas.I_persona.desc %></h4>
            </td>
            <td>
              <p><%- subPersonas.V_persona.name %></p>
              <h6>_________________________________</h6>
              <h4><%- subPersonas.V_persona.desc %></h4>
            </td>
          </tr>
          <tr>
            <th scope="row"><br>Strategies of other developers</td>
            <td>
              <div id="piechartD"></div>
            </td>
            <td>
              <div id="piechartI"></div>
            </td>
            <td>
              <div id="piechartV">
            </td>
          </tr>
        </tbody>
      </table>
      <!-- </div> -->
    </div>
    <br><br><br><br>
    <script type="text/javascript">

      // Load google charts
      google.charts.load('current', { 'packages': ['corechart'] });
      google.charts.setOnLoadCallback(drawCharts);

      // Draw the chart and set the chart values
      function drawCharts() {
        var dataD = google.visualization.arrayToDataTable([
          ['Persona', 'Respondants'],
          ['Calculated', <%= metrics.numCalculated_D %>],
          ['Experimental', <%= metrics.numExperimental_D %>],
          ['Resourceful', <%= metrics.numResourceful_D %>]
        ]);
        var dataV = google.visualization.arrayToDataTable([
          ['Persona', 'Respondants'],
          ['Calculated', <%= metrics.numCalculated_V %>],
          ['Experimental', <%= metrics.numExperimental_V %>],
          ['Resourceful', <%= metrics.numResourceful_V %>]
        ]);
        var dataI = google.visualization.arrayToDataTable([
          ['Persona', 'Respondants'],
          ['Calculated', <%= metrics.numCalculated_I %>],
          ['Experimental', <%= metrics.numExperimental_I %>],
          ['Resourceful', <%= metrics.numResourceful_I %>]
        ]);

        let width = 550;
        let height = 400;
        let optionsD = {
          'width': 0.8 * width,
          'height': 0.8 * height,
          'fontSize': 20,
          'backgroundColor': '#c5cfc4',
          'legend': {
            position: 'none'
          },
          'tooltip': {
            textStyle: {
              fontSize: 12
            }
          },
          fontName: "Aldrich"
        };
        let optionsI = {
          'width': 0.8 * width,
          'height': 0.8 * height,
          'fontSize': 20,
          'backgroundColor': '#c5cfc4',
          'legend': {
            position: 'none'
          },
          'tooltip': {
            textStyle: {
              fontSize: 12
            }
          },
          fontName: "Aldrich"
        };
        let optionsV = {
          'width': 0.8 * width,
          'height': 0.8 * height,
          'fontSize': 20,
          'backgroundColor': '#c5cfc4',
          'legend': {
            position: 'none'
          },
          'tooltip': {
            textStyle: {
              fontSize: 12
            }
          },
          fontName: "Aldrich"
        };

        // Display the chart inside the <div> element with id="piechart"
        var chartD = new google.visualization.PieChart(document.getElementById('piechartD'));
        chartD.draw(dataD, optionsD);
        // Display the chart inside the <div> element with id="piechart"
        var chartI = new google.visualization.PieChart(document.getElementById('piechartI'));
        chartI.draw(dataI, optionsI);
        // Display the chart inside the <div> element with id="piechart"
        var chartV = new google.visualization.PieChart(document.getElementById('piechartV'));
        chartV.draw(dataV, optionsV);
      }
    </script>
  </main>

  <footer>
    <p class="text-center text-muted">Copyright 2019 Cassandra Bailey - George Mason University</p>
  </footer>

</body>

</html>