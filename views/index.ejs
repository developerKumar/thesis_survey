<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <% include partials/head %>
</head>
<link href= "/public/assets/styles/styles.css" rel="stylesheet" type="text/css" />
<body class="container">
<link href='https://fonts.googleapis.com/css?family=Aldrich' rel='stylesheet'>
<style>
body {
    font-family: 'Aldrich';font-size: 22px;
}
</style>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="/__/firebase/7.2.1/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="/__/firebase/7.2.1/firebase-analytics.js"></script>

  <!-- Initialize Firebase -->
  <script src="/__/firebase/init.js"></script>

<header>
    <% include partials/header %>
</header>

<main>
  <div class="jumbotron jumbotron-fluid">
    <div class="container">
        <h1>Congratulations! Your Programmer Persona is... </h1>
        <h3><%- persona %></h3>
        <br>
        <p><%- desc %></p>

        <br>
        <br>
        <!-- Sharingbutton Facebook -->
<a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=http%3A%2F%2Fsharingbuttons.io" target="_blank" rel="noopener" aria-label="Share on Facebook">
  <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--circle">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><path d="M15.84 9.5H13.5V8.48c0-.53.35-.65.6-.65h1.4v-2.3h-2.35c-2.3 0-2.65 1.7-2.65 2.8V9.5h-2v2h2v7h3v-7h2.1l.24-2z"/></svg>
    </div>Share on Facebook</div>
</a>

<!-- Sharingbutton Twitter -->
<a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Super%20fast%20and%20easy%20Social%20Media%20Sharing%20Buttons.%20No%20JavaScript.%20No%20tracking.&amp;url=http%3A%2F%2Fsharingbuttons.io" target="_blank" rel="noopener" aria-label="Share on Twitter">
  <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--circle">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.5 7.4l-2 .2c-.4-.5-1-.8-2-.8C13.3 6.8 12 8 12 9.4v.6c-2 0-4-1-5.4-2.7-.2.4-.3.8-.3 1.3 0 1 .4 1.7 1.2 2.2-.5 0-1 0-1.2-.3 0 1.3 1 2.3 2 2.6-.3.4-.7.4-1 0 .2 1.4 1.2 2 2.3 2-1 1-2.5 1.4-4 1 1.3 1 2.7 1.4 4.2 1.4 4.8 0 7.5-4 7.5-7.5v-.4c.5-.4.8-1.5 1.2-2z"/><circle cx="12" cy="12" r="11.5"/></svg>
    </div>Share on Twitter</div>
</a>

<!-- Sharingbutton LinkedIn -->
<a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fsharingbuttons.io&amp;title=Super%20fast%20and%20easy%20Social%20Media%20Sharing%20Buttons.%20No%20JavaScript.%20No%20tracking.&amp;summary=Super%20fast%20and%20easy%20Social%20Media%20Sharing%20Buttons.%20No%20JavaScript.%20No%20tracking.&amp;source=http%3A%2F%2Fsharingbuttons.io" target="_blank" rel="noopener" aria-label="Share on LinkedIn">
  <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--large"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--circle">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><path d="M15 12.5c-.28 0-.5.22-.5.5v3.5h-3s.03-6.48 0-7h3v.83s.46-.75 1.7-.75c1.56 0 2.3 1.12 2.3 3.3v3.62h-3V13c0-.28-.23-.5-.5-.5zm-7.5-3h2v7h-2z"/><circle cx="8.5" cy="6.5" r="1"/></svg>
    </div>Share on LinkedIn</div>
</a>

        <div id="piechart"></div>

        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

        <script type="text/javascript">
        // Load google charts
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        // Draw the chart and set the chart values
        function drawChart() {
          var data = google.visualization.arrayToDataTable([
          ['Persona', 'Respondants'],
          ['Calculated', <%= metrics.numCalculated %>],
          ['Experimental', <%= metrics.numExperimental %>],
          ['Resourceful', <%= metrics.numResourceful %>]
        ]);

          // Optional; add a title and set the width and height of the chart
          var options = {'title':'Overall Responses', 'width':550, 'height':400};

          // Display the chart inside the <div> element with id="piechart"
          var chart = new google.visualization.PieChart(document.getElementById('piechart'));
          chart.draw(data, options);
        }
        </script>


        <br>
        <h3>Breakdown</h3>
        <!-- <div class="card" style="width: 18rem;">
        <img class="card-img-top" id="piechartDCard" alt="Card image cap">
          <div class="card-body">
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
          </div>
        </div> -->
          <div id="piechartD" style="display: left"></div>
          <div id="piechartI" style="float: left"></div>
          <div id="piechartV" style="float: left"></div>

          <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

          <script type="text/javascript">
          // Load google charts
          google.charts.load('current', {'packages':['corechart']});
          google.charts.setOnLoadCallback(drawCharts);

          // Draw the chart and set the chart values
          function drawCharts() {
            var dataD = google.visualization.arrayToDataTable([
            ['Persona', 'Respondants'],
            ['Calculated', <%= metrics.numCalculated_D %>],
            ['Experimental', <%= metrics.numExperimental_D %>],
            ['Resourceful', <%= metrics.numResourceful_D %>]
          ]);
          var dataV = google.visualization.arrayToDataTable([
          ['Persona', 'Respondants'],
          ['Calculated', <%= metrics.numCalculated_V %>],
          ['Experimental', <%= metrics.numExperimental_V %>],
          ['Resourceful', <%= metrics.numResourceful_V %>]
        ]);
        var dataI = google.visualization.arrayToDataTable([
        ['Persona', 'Respondants'],
        ['Calculated', <%= metrics.numCalculated_I %>],
        ['Experimental', <%= metrics.numExperimental_I %>],
        ['Resourceful', <%= metrics.numResourceful_I %>]
      ]);

            // Optional; add a title and set the width and height of the chart
            let width = 550;
            let height = 400;
            var optionsD = {'title':'Overall Responses - Debug', 'width':width, 'height':height};
            var optionsI = {'title':'Overall Responses - Implementation', 'width':width, 'height':height};
            var optionsV = {'title':'Overall Responses - Verification', 'width':width, 'height':height};

            // Display the chart inside the <div> element with id="piechart"
            var chartD = new google.visualization.PieChart(document.getElementById('piechartD'));
            chartD.draw(dataD, optionsD);
            // Display the chart inside the <div> element with id="piechart"
            var chartI = new google.visualization.PieChart(document.getElementById('piechartI'));
            chartI.draw(dataI, optionsI);
            // Display the chart inside the <div> element with id="piechart"
            var chartV = new google.visualization.PieChart(document.getElementById('piechartV'));
            chartV.draw(dataV, optionsV);
          }

          // google.visualization.events.addListener(chartD, 'ready', function () {
          //   document.getElementById('piechartDCard').innerHTML = '<img src="' + chartD.getImageURI() + '">';
          // });
          </script>
    </div>
  </div>
</main>

<footer>
    <% include partials/footer %>
</footer>

</body>
</html>
